import{g as te}from"./request-Dqf-boaj.js";/* empty css                   *//* empty css                        *//* empty css                   *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                 *//* empty css                     *//* empty css                  */import{g as ae,a as ne,e as oe}from"./exam-DjiUR9ID.js";import{g as se}from"./user-DEyepcqP.js";import{r,a as I,c as u,b as n,d as o,F as k,p as V,w as l,y as le,G as ie,H as re,o as i,I as ue,t as _,z as pe,J as ce,B as me,e as d,g,h as L,C as de,D as ge,l as _e,K as P}from"./index-D1OXtn0V.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ve="/assets/exam-_D9Xx70g.png",xe={class:"exam-page flex-col"},we={class:"exam-selected-section flex-col"},ke={class:"exam-option-group flex-row justify-between"},ye=["onClick"],Ce={class:"center-box"},be={class:"exam-list-group flex-row"},ze={class:"right-info"},Ee={class:"exam-title"},Se={class:"exam-content flex-col justify-between"},De={class:"exam-button-container"},Te={key:0,class:"exam-hash-entry"},Ne={key:1,class:"exam-hash-entry"},he={key:2},Ie={class:"exam-page-pagination flex-row"},Ve={__name:"Exam",setup(Le){const y=r([]),C=r(0),b=r(0),U=r([{label:"未完赛",value:0},{label:"历史竞赛",value:1}]),s=I({pageNum:1,pageSize:9,type:0});async function p(){const t=await ae(s);y.value=t.rows,C.value=t.total}p();async function $(t){b.value=t,s.pageNum=1,s.type=t,p()}function j(){s.value.pageNum=1,p()}function R(){s.pageNum=1,s.pageSize=9,s.type=0,p()}function B(t){s.pageNum=1,p()}function F(t){p()}function O(t){const e=new Date;return new Date(t.startTime)<e&&new Date(t.endTime)>e&&!t.enter}function A(t){const e=new Date;return new Date(t.startTime)>e&&t.enter}function H(t){const e=new Date;return new Date(t.endTime)<e}function G(t){const e=new Date;return new Date(t.startTime)<e&&new Date(t.endTime)>e&&t.enter}function J(t){const e=new Date;return new Date(t.startTime)>e&&!t.enter}const z=r(!1);async function K(){te()&&(await se(),z.value=!0)}async function M(t){if(await K(),!z.value){P.error("请先登录后报名参赛,谢谢");return}const e=r({examId:t});await oe(e.value),P.success("您已报名成功，请按时参赛"),p()}function E(t){_e.push(`/c-oj/anwser?examId=${t.examId}&examTitle=${t.title}&examEndTime=${t.endTime}`)}const c=I({examId:"",pageNum:1,pageSize:9}),S=r([]),D=r(0);function X(t){c.pageNum=1,v()}function q(t){v()}const f=r(!1);async function v(){const t=await ne(c);S.value=t.rows,D.value=t.total}function Q(t){f.value=!0,c.examId=t,v()}return(t,e)=>{const W=ce,T=pe,m=me,Y=le,N=ie,x=ge,Z=de,ee=re;return i(),u(k,null,[n("div",xe,[n("div",we,[n("div",ke,[(i(!0),u(k,null,V(U.value,a=>(i(),u("div",{class:ue(["exam-option",{selected:b.value===a.value}]),key:a.value,onClick:h=>$(a.value)},_(a.label),11,ye))),128))]),n("div",Ce,[e[13]||(e[13]=n("span",{class:"exam-list-title"},"推荐竞赛",-1)),o(Y,{inline:"true",class:"exam-navigation flex-row justify-between"},{default:l(()=>[o(T,{label:"竞赛时间",prop:"datetimerange",class:"exam-navigation-box"},{default:l(()=>[o(W,{style:{width:"360px"},modelValue:s.datetimerange,"onUpdate:modelValue":e[0]||(e[0]=a=>s.datetimerange=a),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])]),_:1}),o(T,null,{default:l(()=>[o(m,{onClick:j,plain:"",type:"primary"},{default:l(()=>e[6]||(e[6]=[d("搜索",-1)])),_:1,__:[6]}),o(m,{onClick:R,plain:"",type:"info"},{default:l(()=>e[7]||(e[7]=[d("重置",-1)])),_:1,__:[7]})]),_:1})]),_:1}),n("div",be,[(i(!0),u(k,null,V(y.value,(a,h)=>(i(),u("div",{class:"exam-list-item flex-col",key:h},[e[12]||(e[12]=n("div",null,[n("img",{src:ve})],-1)),n("div",ze,[n("span",Ee,_(a.title),1),n("div",Se,[n("span",null,"开赛时间："+_(a.startTime),1),n("span",null,"结束时间："+_(a.endTime),1)]),n("div",De,[O(a)?(i(),u("span",Te,"已开赛")):g("",!0),A(a)?(i(),u("span",Ne,"已报名")):g("",!0),H(a)?(i(),u("div",he,[o(m,{class:"exam-practice-button",type:"primary",plain:"",onClick:w=>E(a)},{default:l(()=>e[8]||(e[8]=[d("竞赛练习",-1)])),_:2,__:[8]},1032,["onClick"]),o(m,{class:"exam-rank-button",type:"primary",plain:"",onClick:w=>Q(a.examId)},{default:l(()=>e[9]||(e[9]=[d("查看排名",-1)])),_:2,__:[9]},1032,["onClick"])])):g("",!0),G(a)?(i(),L(m,{key:3,class:"exam-start-button",type:"primary",plain:"",onClick:w=>E(a)},{default:l(()=>e[10]||(e[10]=[d("开始答题",-1)])),_:2,__:[10]},1032,["onClick"])):g("",!0),J(a)?(i(),L(m,{key:4,class:"exam-enter-button",type:"primary",plain:"",onClick:w=>M(a.examId)},{default:l(()=>e[11]||(e[11]=[d("报名参赛",-1)])),_:2,__:[11]},1032,["onClick"])):g("",!0)])])]))),128))]),n("div",Ie,[o(N,{background:"",layout:"total, sizes, prev, pager, next, jumper",total:C.value,"current-page":s.pageNum,"onUpdate:currentPage":e[1]||(e[1]=a=>s.pageNum=a),"page-size":s.pageSize,"onUpdate:pageSize":e[2]||(e[2]=a=>s.pageSize=a),"page-sizes":[3,6,9,12],onSizeChange:B,onCurrentChange:F},null,8,["total","current-page","page-size"])])])])]),o(ee,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=a=>f.value=a),width:"600px",top:"30vh","show-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,class:"oj-login-dialog-centor",center:""},{default:l(()=>[o(Z,{data:S.value},{default:l(()=>[o(x,{label:"排名",prop:"examRank"}),o(x,{label:"用户昵称",prop:"nickName"}),o(x,{label:"用户得分",prop:"score"})]),_:1},8,["data"]),o(N,{class:"range_page",background:"",layout:"total, sizes, prev, pager, next, jumper",total:D.value,"current-page":c.pageNum,"onUpdate:currentPage":e[3]||(e[3]=a=>c.pageNum=a),"page-size":c.pageSize,"onUpdate:pageSize":e[4]||(e[4]=a=>c.pageSize=a),"page-sizes":[5,10,15,20],onSizeChange:X,onCurrentChange:q},null,8,["total","current-page","page-size"])]),_:1},8,["modelValue"])],64)}}},Xe=fe(Ve,[["__scopeId","data-v-fb12226b"]]);export{Xe as default};
