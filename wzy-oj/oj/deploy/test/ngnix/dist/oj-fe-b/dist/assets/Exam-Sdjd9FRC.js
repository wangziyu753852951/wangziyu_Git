import"./request-6OUf9ASD.js";/* empty css                     *//* empty css                     */import{g as j,d as L,c as M,p as R}from"./exam-BwCz1nEL.js";import{e as Y,r as E,c as f,b as a,w as l,M as A,R as H,S as O,T as W,o as u,N as X,X as q,E as G,O as J,l as i,u as K,U as Q,V as Z,Y as ee,W as m,g as c,d as z}from"./index-oXHeAlsD.js";const te={key:0},ae={key:1},ne={key:0},le={key:1},de={__name:"Exam",setup(oe){function _(n){const e=new Date;return new Date(n.startTime)>e}const o=Y({pageNum:1,pageSize:10,startTime:"",endTime:"",title:""}),b=E([]),C=E(0),d=E([]);async function p(){d.value[0]instanceof Date&&(o.startTime=T(d.value[0])),d.value[1]instanceof Date&&(o.endTime=T(d.value[1]));const n=await j(o);b.value=n.rows,C.value=n.total}function T(n){const e=n.getFullYear(),y=String(n.getMonth()+1).padStart(2,"0"),g=String(n.getDate()).padStart(2,"0"),k=String(n.getHours()).padStart(2,"0"),s=String(n.getMinutes()).padStart(2,"0"),S=String(n.getSeconds()).padStart(2,"0");return`${e}-${y}-${g} ${k}:${s}:${S}`}p();function N(n){o.pageNum=1,p()}function $(n){p()}function V(){o.pageNum=1,p()}function w(){o.pageNum=1,o.pageSize=10,o.title="",o.startTime="",o.endTime="",d.value.length=0,p()}function D(){z.push("/oj/layout/updateExam?type=add")}async function I(n){z.push(`/oj/layout/updateExam?type=edit&examId=${n}`)}async function P(n){await L(n),o.pageNum=1,p()}async function U(n){await R(n),p()}async function h(n){await M(n),p()}return(n,e)=>{const y=q,g=X,k=G,s=J,S=A,r=Z,x=ee,B=H,F=O;return u(),f(W,null,[a(S,{inline:"true"},{default:l(()=>[a(g,{label:"创建日期"},{default:l(()=>[a(y,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),style:{width:"240px"},type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),a(g,{label:"竞赛名称"},{default:l(()=>[a(k,{modelValue:o.title,"onUpdate:modelValue":e[1]||(e[1]=t=>o.title=t),placeholder:"请您输入要搜索的竞赛名称"},null,8,["modelValue"])]),_:1}),a(g,null,{default:l(()=>[a(s,{onClick:V,plain:""},{default:l(()=>e[4]||(e[4]=[i("搜索",-1)])),_:1,__:[4]}),a(s,{onClick:w,plain:"",type:"info"},{default:l(()=>e[5]||(e[5]=[i("重置",-1)])),_:1,__:[5]}),a(s,{type:"primary",icon:K(Q),plain:"",onClick:D},{default:l(()=>e[6]||(e[6]=[i("添加竞赛",-1)])),_:1,__:[6]},8,["icon"])]),_:1})]),_:1}),a(B,{height:"526px",data:b.value},{default:l(()=>[a(r,{prop:"title",label:"竞赛标题"}),a(r,{prop:"startTime",width:"180px",label:"竞赛开始时间"}),a(r,{prop:"endTime",width:"180px",label:"竞赛结束时间"}),a(r,{label:"是否开赛",width:"100px"},{default:l(({row:t})=>[_(t)?(u(),f("div",ae,[a(x,{type:"info"},{default:l(()=>e[8]||(e[8]=[i("未开赛",-1)])),_:1,__:[8]})])):(u(),f("div",te,[a(x,{type:"warning"},{default:l(()=>e[7]||(e[7]=[i("已开赛",-1)])),_:1,__:[7]})]))]),_:1}),a(r,{prop:"status",width:"100px",label:"是否发布"},{default:l(({row:t})=>[t.status==0?(u(),f("div",ne,[a(x,{type:"danger"},{default:l(()=>e[9]||(e[9]=[i("未发布",-1)])),_:1,__:[9]})])):m("",!0),t.status==1?(u(),f("div",le,[a(x,{type:"success"},{default:l(()=>e[10]||(e[10]=[i("已发布",-1)])),_:1,__:[10]})])):m("",!0)]),_:1}),a(r,{prop:"createName",width:"140px",label:"创建用户"}),a(r,{prop:"createTime",width:"180px",label:"创建时间"}),a(r,{label:"操作",width:"180px"},{default:l(({row:t})=>[_(t)&&t.status==0?(u(),c(s,{key:0,type:"text",onClick:v=>I(t.examId)},{default:l(()=>e[11]||(e[11]=[i("编辑 ",-1)])),_:2,__:[11]},1032,["onClick"])):m("",!0),_(t)&&t.status==0?(u(),c(s,{key:1,type:"text",onClick:v=>P(t.examId),class:"red"},{default:l(()=>e[12]||(e[12]=[i("删除 ",-1)])),_:2,__:[12]},1032,["onClick"])):m("",!0),t.status==1&&_(t)?(u(),c(s,{key:2,type:"text",onClick:v=>h(t.examId)},{default:l(()=>e[13]||(e[13]=[i("撤销发布",-1)])),_:2,__:[13]},1032,["onClick"])):m("",!0),t.status==0&&_(t)?(u(),c(s,{key:3,type:"text",onClick:v=>U(t.examId)},{default:l(()=>e[14]||(e[14]=[i("发布",-1)])),_:2,__:[14]},1032,["onClick"])):m("",!0),_(t)?m("",!0):(u(),c(s,{key:4,type:"text"},{default:l(()=>e[15]||(e[15]=[i("已开赛，不允许操作",-1)])),_:1,__:[15]}))]),_:1})]),_:1},8,["data"]),a(F,{background:"",size:"small",layout:"total, sizes, prev, pager, next, jumper",total:C.value,"current-page":o.pageNum,"onUpdate:currentPage":e[2]||(e[2]=t=>o.pageNum=t),"page-size":o.pageSize,"onUpdate:pageSize":e[3]||(e[3]=t=>o.pageSize=t),"page-sizes":[5,10,15,20],onSizeChange:N,onCurrentChange:$},null,8,["total","current-page","page-size"])],64)}}};export{de as default};
